import{x as Dn,aN as un,an as zn,aQ as xn,r as Z,ar as we,K as P,aR as h,A as I,h as bn,aS as Ie,S as ye,aW as Ln,aY as $n,aK as re,B as Wn,aL as qn,aI as Ne,aG as Kn,aP as Ke}from"./index-DMeDtYdZ.js";/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */function K(e){return typeof e=="function"}function Vn(e){return e==null}const ge=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Xe(e){return Number(e)>=0}function Gn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Hn(e){return typeof e=="object"&&e!==null}function Yn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function on(e){if(!Hn(e)||Yn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Ae(e,n){return Object.keys(n).forEach(t=>{if(on(n[t])&&on(e[t])){e[t]||(e[t]={}),Ae(e[t],n[t]);return}e[t]=n[t]}),e}function _e(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let l=1;l<n.length;l++){if(Xe(n[l])){t+=`[${n[l]}]`;continue}t+=`.${n[l]}`}return t}const Qn={};function Xn(e){return Qn[e]}function sn(e,n,t){typeof t.value=="object"&&(t.value=A(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function A(e){if(typeof e!="object")return e;var n=0,t,l,u,a=Object.prototype.toString.call(e);if(a==="[object Object]"?u=Object.create(e.__proto__||null):a==="[object Array]"?u=Array(e.length):a==="[object Set]"?(u=new Set,e.forEach(function(f){u.add(A(f))})):a==="[object Map]"?(u=new Map,e.forEach(function(f,d){u.set(A(d),A(f))})):a==="[object Date]"?u=new Date(+e):a==="[object RegExp]"?u=new RegExp(e.source,e.flags):a==="[object DataView]"?u=new e.constructor(A(e.buffer)):a==="[object ArrayBuffer]"?u=e.slice(0):a.slice(-6)==="Array]"&&(u=new e.constructor(e)),u){for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)sn(u,l[n],Object.getOwnPropertyDescriptor(e,l[n]));for(n=0,l=Object.getOwnPropertyNames(e);n<l.length;n++)Object.hasOwnProperty.call(u,t=l[n])&&u[t]===e[t]||sn(u,t,Object.getOwnPropertyDescriptor(e,t))}return u||e}const Je=Symbol("vee-validate-form"),Jn=Symbol("vee-validate-form-context"),Zn=Symbol("vee-validate-field-instance"),cn=Symbol("Default empty value"),et=typeof window<"u";function Ge(e){return K(e)&&!!e.__locatorRef}function ee(e){return!!e&&K(e.parse)&&e.__type==="VVTypedSchema"}function Ce(e){return!!e&&K(e.validate)}function On(e){return e==="checkbox"||e==="radio"}function nt(e){return ge(e)||Array.isArray(e)}function tt(e){return Array.isArray(e)?e.length===0:ge(e)&&Object.keys(e).length===0}function Te(e){return/^\[.+\]$/i.test(e)}function rt(e){return pn(e)&&e.multiple}function pn(e){return e.tagName==="SELECT"}function Sn(e){return Ze(e)&&e.target&&"submit"in e.target}function Ze(e){return e?!!(typeof Event<"u"&&K(Event)&&e instanceof Event||e&&e.srcElement):!1}function $(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,l,u;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(!$(e[l],n[l]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;for(l of e.entries())if(!$(l[1],n.get(l[0])))return!1;return!0}if(fn(e)&&fn(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(e[l]!==n[l])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(e=dn(e),n=dn(n),u=Object.keys(e),t=u.length,t!==Object.keys(n).length)return!1;for(l=t;l--!==0;)if(!Object.prototype.hasOwnProperty.call(n,u[l]))return!1;for(l=t;l--!==0;){var a=u[l];if(!$(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function dn(e){return Object.fromEntries(Object.entries(e).filter(([,n])=>n!==void 0))}function fn(e){return et?e instanceof File:!1}function en(e){return Te(e)?e.replace(/\[|\]/gi,""):e}function G(e,n,t){return e?Te(n)?e[en(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((u,a)=>nt(u)&&a in u?u[a]:t,e):t}function de(e,n,t){if(Te(n)){e[en(n)]=t;return}const l=n.split(/\.|\[(\d+)\]/).filter(Boolean);let u=e;for(let a=0;a<l.length;a++){if(a===l.length-1){u[l[a]]=t;return}(!(l[a]in u)||Vn(u[l[a]]))&&(u[l[a]]=Xe(l[a+1])?[]:{}),u=u[l[a]]}}function We(e,n){if(Array.isArray(e)&&Xe(n)){e.splice(Number(n),1);return}ge(e)&&delete e[n]}function vn(e,n){if(Te(n)){delete e[en(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let a=0;a<t.length;a++){if(a===t.length-1){We(l,t[a]);break}if(!(t[a]in l)||Vn(l[t[a]]))break;l=l[t[a]]}const u=t.map((a,f)=>G(e,t.slice(0,f).join(".")));for(let a=u.length-1;a>=0;a--)if(tt(u[a])){if(a===0){We(e,t[0]);continue}We(u[a-1],t[a-1])}}function H(e){return Object.keys(e)}function _n(e,n=void 0){const t=Ne();return(t==null?void 0:t.provides[e])||Kn(e,n)}function mn(e,n,t){if(Array.isArray(e)){const l=[...e],u=l.findIndex(a=>$(a,n));return u>=0?l.splice(u,1):l.push(n),l}return $(e,n)?t:n}function hn(e,n=0){let t=null,l=[];return function(...u){return t&&clearTimeout(t),t=setTimeout(()=>{const a=e(...u);l.forEach(f=>f(a)),l=[]},n),new Promise(a=>l.push(a))}}function it(e,n){return ge(n)&&n.number?Gn(e):e}function He(e,n){let t;return async function(...u){const a=e(...u);t=a;const f=await a;return a!==t?f:(t=void 0,n(f,u))}}function Ye(e){return Array.isArray(e)?e:e?[e]:[]}function Fe(e,n){const t={};for(const l in e)n.includes(l)||(t[l]=e[l]);return t}function lt(e){let n=null,t=[];return function(...l){const u=re(()=>{if(n!==u)return;const a=e(...l);t.forEach(f=>f(a)),t=[],n=null});return n=u,new Promise(a=>t.push(a))}}function at(e,n,t){return n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var l,u;return(u=(l=n.slots).default)===null||u===void 0?void 0:u.call(l,t())}}:n.slots.default}function qe(e){if(jn(e))return e._value}function jn(e){return"_value"in e}function ut(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Me(e){if(!Ze(e))return e;const n=e.target;if(On(n.type)&&jn(n))return qe(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(rt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(qe);if(pn(n)){const t=Array.from(n.options).find(l=>l.selected);return t?qe(t):n.value}return ut(n)}function An(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ge(e)&&e._$$isNormalized?e:ge(e)?Object.keys(e).reduce((t,l)=>{const u=ot(e[l]);return e[l]!==!1&&(t[l]=yn(u)),t},n):typeof e!="string"?n:e.split("|").reduce((t,l)=>{const u=st(l);return u.name&&(t[u.name]=yn(u.params)),t},n):n}function ot(e){return e===!0?[]:Array.isArray(e)||ge(e)?e:[e]}function yn(e){const n=t=>typeof t=="string"&&t[0]==="@"?ct(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,l)=>(t[l]=n(e[l]),t),{})}const st=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function ct(e){const n=t=>{var l;return(l=G(t,e))!==null&&l!==void 0?l:t[e]};return n.__locatorRef=e,n}function dt(e){return Array.isArray(e)?e.filter(Ge):H(e).filter(n=>Ge(e[n])).map(n=>e[n])}const ft={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let vt=Object.assign({},ft);const je=()=>vt;async function En(e,n,t={}){const l=t==null?void 0:t.bails,u={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:l??!0,formData:(t==null?void 0:t.values)||{}},a=await mt(u,e);return Object.assign(Object.assign({},a),{valid:!a.errors.length})}async function mt(e,n){const t=e.rules;if(ee(t)||Ce(t))return yt(n,Object.assign(Object.assign({},e),{rules:t}));if(K(t)||Array.isArray(t)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},v=Array.isArray(t)?t:[t],s=v.length,g=[];for(let S=0;S<s;S++){const j=v[S],V=await j(n,d);if(!(typeof V!="string"&&!Array.isArray(V)&&V)){if(Array.isArray(V))g.push(...V);else{const z=typeof V=="string"?V:Pn(d);g.push(z)}if(e.bails)return{errors:g}}}return{errors:g}}const l=Object.assign(Object.assign({},e),{rules:An(t)}),u=[],a=Object.keys(l.rules),f=a.length;for(let d=0;d<f;d++){const v=a[d],s=await gt(l,n,{name:v,params:l.rules[v]});if(s.error&&(u.push(s.error),e.bails))return{errors:u}}return{errors:u}}function ht(e){return!!e&&e.name==="ValidationError"}function Fn(e){return{__type:"VVTypedSchema",async parse(t,l){var u;try{return{output:await e.validate(t,{abortEarly:!1,context:(l==null?void 0:l.formData)||{}}),errors:[]}}catch(a){if(!ht(a))throw a;if(!(!((u=a.inner)===null||u===void 0)&&u.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const f=a.inner.reduce((d,v)=>{const s=v.path||"";return d[s]||(d[s]={errors:[],path:s}),d[s].errors.push(...v.errors),d},{});return{errors:Object.values(f)}}}}}async function yt(e,n){const l=await(ee(n.rules)?n.rules:Fn(n.rules)).parse(e,{formData:n.formData}),u=[];for(const a of l.errors)a.errors.length&&u.push(...a.errors);return{value:l.value,errors:u}}async function gt(e,n,t){const l=Xn(t.name);if(!l)throw new Error(`No such validator '${t.name}' exists.`);const u=bt(t.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:u})},f=await l(n,u,a);return typeof f=="string"?{error:f}:{error:f?void 0:Pn(a)}}function Pn(e){const n=je().generateMessage;return n?n(e):"Field is invalid"}function bt(e,n){const t=l=>Ge(l)?l(n):l;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((l,u)=>(l[u]=t(e[u]),l),{})}async function Vt(e,n){const l=await(ee(e)?e:Fn(e)).parse(A(n),{formData:A(n)}),u={},a={};for(const f of l.errors){const d=f.errors,v=(f.path||"").replace(/\["(\d+)"\]/g,(s,g)=>`[${g}]`);u[v]={valid:!d.length,errors:d},d.length&&(a[v]=d[0])}return{valid:!l.errors.length,results:u,errors:a,values:l.value,source:"schema"}}async function Ot(e,n,t){const u=H(e).map(async s=>{var g,S,j;const V=(g=t==null?void 0:t.names)===null||g===void 0?void 0:g[s],M=await En(G(n,s),e[s],{name:(V==null?void 0:V.name)||s,label:V==null?void 0:V.label,values:n,bails:(j=(S=t==null?void 0:t.bailsMap)===null||S===void 0?void 0:S[s])!==null&&j!==void 0?j:!0});return Object.assign(Object.assign({},M),{path:s})});let a=!0;const f=await Promise.all(u),d={},v={};for(const s of f)d[s.path]={valid:s.valid,errors:s.errors},s.valid||(a=!1,v[s.path]=s.errors[0]);return{valid:a,results:d,errors:v,source:"schema"}}let gn=0;function pt(e,n){const{value:t,initialValue:l,setInitialValue:u}=St(e,n.modelValue,n.form);if(!n.form){let v=function(V){var M;"value"in V&&(t.value=V.value),"errors"in V&&g(V.errors),"touched"in V&&(j.touched=(M=V.touched)!==null&&M!==void 0?M:j.touched),"initialValue"in V&&u(V.initialValue)};const{errors:s,setErrors:g}=At(),S=gn>=Number.MAX_SAFE_INTEGER?0:++gn,j=jt(t,l,s,n.schema);return{id:S,path:e,value:t,initialValue:l,meta:j,flags:{pendingUnmount:{[S]:!1},pendingReset:!1},errors:s,setState:v}}const a=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),f=P(()=>a.errors);function d(v){var s,g,S;"value"in v&&(t.value=v.value),"errors"in v&&((s=n.form)===null||s===void 0||s.setFieldError(I(e),v.errors)),"touched"in v&&((g=n.form)===null||g===void 0||g.setFieldTouched(I(e),(S=v.touched)!==null&&S!==void 0?S:!1)),"initialValue"in v&&u(v.initialValue)}return{id:Array.isArray(a.id)?a.id[a.id.length-1]:a.id,path:e,value:t,errors:f,meta:a,initialValue:l,flags:a.__flags,setState:d}}function St(e,n,t){const l=Z(I(n));function u(){return t?G(t.initialValues.value,I(e),I(l)):I(l)}function a(s){if(!t){l.value=s;return}t.setFieldInitialValue(I(e),s,!0)}const f=P(u);if(!t)return{value:Z(u()),initialValue:f,setInitialValue:a};const d=_t(n,t,f,e);return t.stageInitialValue(I(e),d,!0),{value:P({get(){return G(t.values,I(e))},set(s){t.setFieldValue(I(e),s,!1)}}),initialValue:f,setInitialValue:a}}function _t(e,n,t,l){return Ie(e)?I(e):e!==void 0?e:G(n.values,I(l),I(t))}function jt(e,n,t,l){const u=P(()=>{var f,d,v;return(v=(d=(f=h(l))===null||f===void 0?void 0:f.describe)===null||d===void 0?void 0:d.call(f).required)!==null&&v!==void 0?v:!1}),a=we({touched:!1,pending:!1,valid:!0,required:u,validated:!!I(t).length,initialValue:P(()=>I(n)),dirty:P(()=>!$(I(e),I(n)))});return ye(t,f=>{a.valid=!f.length},{immediate:!0,flush:"sync"}),a}function At(){const e=Z([]);return{errors:e,setErrors:n=>{e.value=Ye(n)}}}function kt(e,n,t){return On(t==null?void 0:t.type)?Ft(e,n,t):wn(e,n,t)}function wn(e,n,t){const{initialValue:l,validateOnMount:u,bails:a,type:f,checkedValue:d,label:v,validateOnValueUpdate:s,uncheckedValue:g,controlled:S,keepValueOnUnmount:j,syncVModel:V,form:M}=Et(t),z=S?_n(Je):void 0,_=M||z,x=P(()=>_e(h(e))),B=P(()=>{if(h(_==null?void 0:_.schema))return;const p=I(n);return Ce(p)||ee(p)||K(p)||Array.isArray(p)?p:An(p)}),be=!K(B.value)&&ee(h(n)),{id:ie,value:le,initialValue:ne,meta:T,setState:ae,errors:Ve,flags:ue}=pt(x,{modelValue:l,form:_,bails:a,label:v,type:f,validate:B.value?k:void 0,schema:be?n:void 0}),W=P(()=>Ve.value[0]);V&&Pt({value:le,prop:V,handleChange:E,shouldValidate:()=>s&&!ue.pendingReset});const oe=(m,p=!1)=>{T.touched=!0,p&&X()};async function fe(m){var p,w;if(_!=null&&_.validateSchema){const{results:F}=await _.validateSchema(m);return(p=F[h(x)])!==null&&p!==void 0?p:{valid:!0,errors:[]}}return B.value?En(le.value,B.value,{name:h(x),label:h(v),values:(w=_==null?void 0:_.values)!==null&&w!==void 0?w:{},bails:a}):{valid:!0,errors:[]}}const X=He(async()=>(T.pending=!0,T.validated=!0,fe("validated-only")),m=>(ue.pendingUnmount[L.id]||(ae({errors:m.errors}),T.pending=!1,T.valid=m.valid),m)),J=He(async()=>fe("silent"),m=>(T.valid=m.valid,m));function k(m){return(m==null?void 0:m.mode)==="silent"?J():X()}function E(m,p=!0){const w=Me(m);pe(w,p)}bn(()=>{if(u)return X();(!_||!_.validateSchema)&&J()});function ve(m){T.touched=m}function se(m){var p;const w=m&&"value"in m?m.value:ne.value;ae({value:A(w),initialValue:A(w),touched:(p=m==null?void 0:m.touched)!==null&&p!==void 0?p:!1,errors:(m==null?void 0:m.errors)||[]}),T.pending=!1,T.validated=!1,J()}const me=Ne();function pe(m,p=!0){le.value=me&&V?it(m,me.props.modelModifiers):m,(p?X:J)()}function Ee(m){ae({errors:Array.isArray(m)?m:[m]})}const nn=P({get(){return le.value},set(m){pe(m,s)}}),L={id:ie,name:x,label:v,value:nn,meta:T,errors:Ve,errorMessage:W,type:f,checkedValue:d,uncheckedValue:g,bails:a,keepValueOnUnmount:j,resetField:se,handleReset:()=>se(),validate:k,handleChange:E,handleBlur:oe,setState:ae,setTouched:ve,setErrors:Ee,setValue:pe};if(Ke(Zn,L),Ie(n)&&typeof I(n)!="function"&&ye(n,(m,p)=>{$(m,p)||(T.validated?X():J())},{deep:!0}),!_)return L;const Re=P(()=>{const m=B.value;return!m||K(m)||Ce(m)||ee(m)||Array.isArray(m)?{}:Object.keys(m).reduce((p,w)=>{const F=dt(m[w]).map(ce=>ce.__locatorRef).reduce((ce,te)=>{const Y=G(_.values,te)||_.values[te];return Y!==void 0&&(ce[te]=Y),ce},{});return Object.assign(p,F),p},{})});return ye(Re,(m,p)=>{if(!Object.keys(m).length)return;!$(m,p)&&(T.validated?X():J())}),qn(()=>{var m;const p=(m=h(L.keepValueOnUnmount))!==null&&m!==void 0?m:h(_.keepValuesOnUnmount),w=h(x);if(p||!_||ue.pendingUnmount[L.id]){_==null||_.removePathState(w,ie);return}ue.pendingUnmount[L.id]=!0;const F=_.getPathState(w);if(Array.isArray(F==null?void 0:F.id)&&(F!=null&&F.multiple)?F!=null&&F.id.includes(L.id):(F==null?void 0:F.id)===L.id){if(F!=null&&F.multiple&&Array.isArray(F.value)){const te=F.value.findIndex(Y=>$(Y,h(L.checkedValue)));if(te>-1){const Y=[...F.value];Y.splice(te,1),_.setFieldValue(w,Y)}Array.isArray(F.id)&&F.id.splice(F.id.indexOf(L.id),1)}else _.unsetPathValue(h(x));_.removePathState(w,ie)}}),L}function Et(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),l=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",u=t&&!("initialValue"in(e||{}))?Qe(Ne(),l):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:u});const a="valueProp"in e?e.valueProp:e.checkedValue,f="standalone"in e?!e.standalone:e.controlled,d=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:u,controlled:f??!0,checkedValue:a,syncVModel:d})}function Ft(e,n,t){const l=t!=null&&t.standalone?void 0:_n(Je),u=t==null?void 0:t.checkedValue,a=t==null?void 0:t.uncheckedValue;function f(d){const v=d.handleChange,s=P(()=>{const S=h(d.value),j=h(u);return Array.isArray(S)?S.findIndex(V=>$(V,j))>=0:$(j,S)});function g(S,j=!0){var V,M;if(s.value===((V=S==null?void 0:S.target)===null||V===void 0?void 0:V.checked)){j&&d.validate();return}const z=h(e),_=l==null?void 0:l.getPathState(z),x=Me(S);let B=(M=h(u))!==null&&M!==void 0?M:x;l&&(_!=null&&_.multiple)&&_.type==="checkbox"?B=mn(G(l.values,z)||[],B,void 0):(t==null?void 0:t.type)==="checkbox"&&(B=mn(h(d.value),B,h(a))),v(B,j)}return Object.assign(Object.assign({},d),{checked:s,checkedValue:u,uncheckedValue:a,handleChange:g})}return f(wn(e,n,t))}function Pt({prop:e,value:n,handleChange:t,shouldValidate:l}){const u=Ne();if(!u||!e)return;const a=typeof e=="string"?e:"modelValue",f=`update:${a}`;a in u.props&&(ye(n,d=>{$(d,Qe(u,a))||u.emit(f,d)}),ye(()=>Qe(u,a),d=>{if(d===cn&&n.value===void 0)return;const v=d===cn?void 0:d;$(v,n.value)||t(v,l())}))}function Qe(e,n){if(e)return e.props[n]}let wt=0;const Pe=["bails","fieldsCount","id","multiple","type","validate"];function In(e){const n=(e==null?void 0:e.initialValues)||{},t=Object.assign({},h(n)),l=I(e==null?void 0:e.validationSchema);return l&&ee(l)&&K(l.cast)?A(l.cast(t)||{}):A(t)}function It(e){var n;const t=wt++,l=(e==null?void 0:e.name)||"Form";let u=0;const a=Z(!1),f=Z(!1),d=Z(0),v=[],s=we(In(e)),g=Z([]),S=Z({}),j=Z({}),V=lt(()=>{j.value=g.value.reduce((i,r)=>(i[_e(h(r.path))]=r,i),{})});function M(i,r){const o=E(i);if(!o){typeof i=="string"&&(S.value[_e(i)]=Ye(r));return}if(typeof i=="string"){const c=_e(i);S.value[c]&&delete S.value[c]}o.errors=Ye(r),o.valid=!o.errors.length}function z(i){H(i).forEach(r=>{M(r,i[r])})}e!=null&&e.initialErrors&&z(e.initialErrors);const _=P(()=>{const i=g.value.reduce((r,o)=>(o.errors.length&&(r[h(o.path)]=o.errors),r),{});return Object.assign(Object.assign({},S.value),i)}),x=P(()=>H(_.value).reduce((i,r)=>{const o=_.value[r];return o!=null&&o.length&&(i[r]=o[0]),i},{})),B=P(()=>g.value.reduce((i,r)=>(i[h(r.path)]={name:h(r.path)||"",label:r.label||""},i),{})),be=P(()=>g.value.reduce((i,r)=>{var o;return i[h(r.path)]=(o=r.bails)!==null&&o!==void 0?o:!0,i},{})),ie=Object.assign({},(e==null?void 0:e.initialErrors)||{}),le=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:ne,originalInitialValues:T,setInitialValues:ae}=Mt(g,s,e),Ve=Ct(g,s,T,x),ue=P(()=>g.value.reduce((i,r)=>{const o=G(s,h(r.path));return de(i,h(r.path),o),i},{})),W=e==null?void 0:e.validationSchema;function oe(i,r){var o,c;const b=P(()=>G(ne.value,h(i))),O=j.value[h(i)],y=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(O&&y){O.multiple=!0;const Q=u++;return Array.isArray(O.id)?O.id.push(Q):O.id=[O.id,Q],O.fieldsCount++,O.__flags.pendingUnmount[Q]=!1,O}const N=P(()=>G(s,h(i))),R=h(i),U=se.findIndex(Q=>Q===R);U!==-1&&se.splice(U,1);const C=P(()=>{var Q,Se,ze,xe;const Le=h(W);if(ee(Le))return(Se=(Q=Le.describe)===null||Q===void 0?void 0:Q.call(Le,h(i)).required)!==null&&Se!==void 0?Se:!1;const $e=h(r==null?void 0:r.schema);return ee($e)&&(xe=(ze=$e.describe)===null||ze===void 0?void 0:ze.call($e).required)!==null&&xe!==void 0?xe:!1}),D=u++,q=we({id:D,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=ie[R])===null||o===void 0)&&o.length),required:C,initialValue:b,errors:Wn([]),bails:(c=r==null?void 0:r.bails)!==null&&c!==void 0?c:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:N,multiple:!1,__flags:{pendingUnmount:{[D]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:P(()=>!$(I(N),I(b)))});return g.value.push(q),j.value[R]=q,V(),x.value[R]&&!ie[R]&&re(()=>{he(R,{mode:"silent"})}),Ie(i)&&ye(i,Q=>{V();const Se=A(N.value);j.value[Q]=q,re(()=>{de(s,Q,Se)})}),q}const fe=hn(ln,5),X=hn(ln,5),J=He(async i=>await(i==="silent"?fe():X()),(i,[r])=>{const o=H(p.errorBag.value),b=[...new Set([...H(i.results),...g.value.map(O=>O.path),...o])].sort().reduce((O,y)=>{var N;const R=y,U=E(R)||ve(R),C=((N=i.results[R])===null||N===void 0?void 0:N.errors)||[],D=h(U==null?void 0:U.path)||R,q=Nt({errors:C,valid:!C.length},O.results[D]);return O.results[D]=q,q.valid||(O.errors[D]=q.errors[0]),U&&S.value[D]&&delete S.value[D],U?(U.valid=q.valid,r==="silent"||r==="validated-only"&&!U.validated||M(U,q.errors),O):(M(D,C),O)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(b.values=i.values,b.source=i.source),H(b.results).forEach(O=>{var y;const N=E(O);N&&r!=="silent"&&(r==="validated-only"&&!N.validated||M(N,(y=b.results[O])===null||y===void 0?void 0:y.errors))}),b});function k(i){g.value.forEach(i)}function E(i){const r=typeof i=="string"?_e(i):i;return typeof r=="string"?j.value[r]:r}function ve(i){return g.value.filter(o=>i.startsWith(h(o.path))).reduce((o,c)=>o?c.path.length>o.path.length?c:o:c,void 0)}let se=[],me;function pe(i){return se.push(i),me||(me=re(()=>{[...se].sort().reverse().forEach(o=>{vn(s,o)}),se=[],me=null})),me}function Ee(i){return function(o,c){return function(O){return O instanceof Event&&(O.preventDefault(),O.stopPropagation()),k(y=>y.touched=!0),a.value=!0,d.value++,Oe().then(y=>{const N=A(s);if(y.valid&&typeof o=="function"){const R=A(ue.value);let U=i?R:N;return y.values&&(U=y.source==="schema"?y.values:Object.assign({},U,y.values)),o(U,{evt:O,controlledValues:R,setErrors:z,setFieldError:M,setTouched:ke,setFieldTouched:Y,setValues:ce,setFieldValue:w,resetForm:Be,resetField:tn})}!y.valid&&typeof c=="function"&&c({values:N,evt:O,errors:y.errors,results:y.results})}).then(y=>(a.value=!1,y),y=>{throw a.value=!1,y})}}}const L=Ee(!1);L.withControlled=Ee(!0);function Re(i,r){const o=g.value.findIndex(b=>b.path===i&&(Array.isArray(b.id)?b.id.includes(r):b.id===r)),c=g.value[o];if(!(o===-1||!c)){if(re(()=>{he(i,{mode:"silent",warn:!1})}),c.multiple&&c.fieldsCount&&c.fieldsCount--,Array.isArray(c.id)){const b=c.id.indexOf(r);b>=0&&c.id.splice(b,1),delete c.__flags.pendingUnmount[r]}(!c.multiple||c.fieldsCount<=0)&&(g.value.splice(o,1),rn(i),V(),delete j.value[i])}}function m(i){H(j.value).forEach(r=>{r.startsWith(i)&&delete j.value[r]}),g.value=g.value.filter(r=>!r.path.startsWith(i)),re(()=>{V()})}const p={name:l,formId:t,values:s,controlledValues:ue,errorBag:_,errors:x,schema:W,submitCount:d,meta:Ve,isSubmitting:a,isValidating:f,fieldArrays:v,keepValuesOnUnmount:le,validateSchema:I(W)?J:void 0,validate:Oe,setFieldError:M,validateField:he,setFieldValue:w,setValues:ce,setErrors:z,setFieldTouched:Y,setTouched:ke,resetForm:Be,resetField:tn,handleSubmit:L,useFieldModel:kn,defineInputBinds:Bn,defineComponentBinds:Un,defineField:De,stageInitialValue:Tn,unsetInitialValue:rn,setFieldInitialValue:Ue,createPathState:oe,getPathState:E,unsetPathValue:pe,removePathState:Re,initialValues:ne,getAllPathStates:()=>g.value,destroyPath:m,isFieldTouched:Cn,isFieldDirty:Mn,isFieldValid:Nn};function w(i,r,o=!0){const c=A(r),b=typeof i=="string"?i:i.path;E(b)||oe(b),de(s,b,c),o&&he(b)}function F(i,r=!0){H(s).forEach(o=>{delete s[o]}),H(i).forEach(o=>{w(o,i[o],!1)}),r&&Oe()}function ce(i,r=!0){Ae(s,i),v.forEach(o=>o&&o.reset()),r&&Oe()}function te(i,r){const o=E(h(i))||oe(i);return P({get(){return o.value},set(c){var b;const O=h(i);w(O,c,(b=h(r))!==null&&b!==void 0?b:!1)}})}function Y(i,r){const o=E(i);o&&(o.touched=r)}function Cn(i){const r=E(i);return r?r.touched:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function Mn(i){const r=E(i);return r?r.dirty:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Nn(i){const r=E(i);return r?r.valid:g.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function ke(i){if(typeof i=="boolean"){k(r=>{r.touched=i});return}H(i).forEach(r=>{Y(r,!!i[r])})}function tn(i,r){var o;const c=r&&"value"in r?r.value:G(ne.value,i),b=E(i);b&&(b.__flags.pendingReset=!0),Ue(i,A(c),!0),w(i,c,!1),Y(i,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),M(i,(r==null?void 0:r.errors)||[]),re(()=>{b&&(b.__flags.pendingReset=!1)})}function Be(i,r){let o=A(i!=null&&i.values?i.values:T.value);o=r!=null&&r.force?o:Ae(T.value,o),o=ee(W)&&K(W.cast)?W.cast(o):o,ae(o,{force:r==null?void 0:r.force}),k(c=>{var b;c.__flags.pendingReset=!0,c.validated=!1,c.touched=((b=i==null?void 0:i.touched)===null||b===void 0?void 0:b[h(c.path)])||!1,w(h(c.path),G(o,h(c.path)),!1),M(h(c.path),void 0)}),r!=null&&r.force?F(o,!1):ce(o,!1),z((i==null?void 0:i.errors)||{}),d.value=(i==null?void 0:i.submitCount)||0,re(()=>{Oe({mode:"silent"}),k(c=>{c.__flags.pendingReset=!1})})}async function Oe(i){const r=(i==null?void 0:i.mode)||"force";if(r==="force"&&k(y=>y.validated=!0),p.validateSchema)return p.validateSchema(r);f.value=!0;const o=await Promise.all(g.value.map(y=>y.validate?y.validate(i).then(N=>({key:h(y.path),valid:N.valid,errors:N.errors,value:N.value})):Promise.resolve({key:h(y.path),valid:!0,errors:[],value:void 0})));f.value=!1;const c={},b={},O={};for(const y of o)c[y.key]={valid:y.valid,errors:y.errors},y.value&&de(O,y.key,y.value),y.errors.length&&(b[y.key]=y.errors[0]);return{valid:o.every(y=>y.valid),results:c,errors:b,values:O,source:"fields"}}async function he(i,r){var o;const c=E(i);if(c&&(r==null?void 0:r.mode)!=="silent"&&(c.validated=!0),W){const{results:b}=await J((r==null?void 0:r.mode)||"validated-only");return b[i]||{errors:[],valid:!0}}return c!=null&&c.validate?c.validate(r):(!c&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function rn(i){vn(ne.value,i)}function Tn(i,r,o=!1){Ue(i,r),de(s,i,r),o&&!(e!=null&&e.initialValues)&&de(T.value,i,A(r))}function Ue(i,r,o=!1){de(ne.value,i,A(r)),o&&de(T.value,i,A(r))}async function ln(){const i=I(W);if(!i)return{valid:!0,results:{},errors:{},source:"none"};f.value=!0;const r=Ce(i)||ee(i)?await Vt(i,s):await Ot(i,s,{names:B.value,bailsMap:be.value});return f.value=!1,r}const Rn=L((i,{evt:r})=>{Sn(r)&&r.target.submit()});bn(()=>{if(e!=null&&e.initialErrors&&z(e.initialErrors),e!=null&&e.initialTouched&&ke(e.initialTouched),e!=null&&e.validateOnMount){Oe();return}p.validateSchema&&p.validateSchema("silent")}),Ie(W)&&ye(W,()=>{var i;(i=p.validateSchema)===null||i===void 0||i.call(p,"validated-only")}),Ke(Je,p);function De(i,r){const o=K(r)||r==null?void 0:r.label,c=E(h(i))||oe(i,{label:o}),b=()=>K(r)?r(Fe(c,Pe)):r||{};function O(){var C;c.touched=!0,((C=b().validateOnBlur)!==null&&C!==void 0?C:je().validateOnBlur)&&he(h(c.path))}function y(){var C;((C=b().validateOnInput)!==null&&C!==void 0?C:je().validateOnInput)&&re(()=>{he(h(c.path))})}function N(){var C;((C=b().validateOnChange)!==null&&C!==void 0?C:je().validateOnChange)&&re(()=>{he(h(c.path))})}const R=P(()=>{const C={onChange:N,onInput:y,onBlur:O};return K(r)?Object.assign(Object.assign({},C),r(Fe(c,Pe)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},C),r.props(Fe(c,Pe))):C});return[te(i,()=>{var C,D,q;return(q=(C=b().validateOnModelUpdate)!==null&&C!==void 0?C:(D=je())===null||D===void 0?void 0:D.validateOnModelUpdate)!==null&&q!==void 0?q:!0}),R]}function kn(i){return Array.isArray(i)?i.map(r=>te(r,!0)):te(i)}function Bn(i,r){const[o,c]=De(i,r);function b(){c.value.onBlur()}function O(N){const R=Me(N);w(h(i),R,!1),c.value.onInput()}function y(N){const R=Me(N);w(h(i),R,!1),c.value.onChange()}return P(()=>Object.assign(Object.assign({},c.value),{onBlur:b,onInput:O,onChange:y,value:o.value}))}function Un(i,r){const[o,c]=De(i,r),b=E(h(i));function O(y){o.value=y}return P(()=>{const y=K(r)?r(Fe(b,Pe)):r||{};return Object.assign({[y.model||"modelValue"]:o.value,[`onUpdate:${y.model||"modelValue"}`]:O},c.value)})}const an=Object.assign(Object.assign({},p),{values:Ln(s),handleReset:()=>Be(),submitForm:Rn});return Ke(Jn,an),an}function Ct(e,n,t,l){const u={touched:"some",pending:"some",valid:"every"},a=P(()=>!$(n,I(t)));function f(){const v=e.value;return H(u).reduce((s,g)=>{const S=u[g];return s[g]=v[S](j=>j[g]),s},{})}const d=we(f());return $n(()=>{const v=f();d.touched=v.touched,d.valid=v.valid,d.pending=v.pending}),P(()=>Object.assign(Object.assign({initialValues:I(t)},d),{valid:d.valid&&!H(l.value).length,dirty:a.value}))}function Mt(e,n,t){const l=In(t),u=Z(l),a=Z(A(l));function f(d,v){v!=null&&v.force?(u.value=A(d),a.value=A(d)):(u.value=Ae(A(u.value)||{},A(d)),a.value=Ae(A(a.value)||{},A(d))),v!=null&&v.updateFields&&e.value.forEach(s=>{if(s.touched)return;const S=G(u.value,h(s.path));de(n,h(s.path),A(S))})}return{initialValues:u,originalInitialValues:a,setInitialValues:f}}function Nt(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}const Tt=Dn({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(e,n){const t=un(e,"validationSchema"),l=un(e,"keepValues"),{errors:u,errorBag:a,values:f,meta:d,isSubmitting:v,isValidating:s,submitCount:g,controlledValues:S,validate:j,validateField:V,handleReset:M,resetForm:z,handleSubmit:_,setErrors:x,setFieldError:B,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetField:T}=It({validationSchema:t.value?t:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:l,name:e.name}),ae=_((k,{evt:E})=>{Sn(E)&&E.target.submit()},e.onInvalidSubmit),Ve=e.onSubmit?_(e.onSubmit,e.onInvalidSubmit):ae;function ue(k){Ze(k)&&k.preventDefault(),M(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function W(k,E){return _(typeof k=="function"&&!E?k:E,e.onInvalidSubmit)(k)}function oe(){return A(f)}function fe(){return A(d.value)}function X(){return A(u.value)}function J(){return{meta:d.value,errors:u.value,errorBag:a.value,values:f,isSubmitting:v.value,isValidating:s.value,submitCount:g.value,controlledValues:S.value,validate:j,validateField:V,handleSubmit:W,handleReset:M,submitForm:ae,setErrors:x,setFieldError:B,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetForm:z,resetField:T,getValues:oe,getMeta:fe,getErrors:X}}return n.expose({setFieldError:B,setErrors:x,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetForm:z,validate:j,validateField:V,resetField:T,getValues:oe,getMeta:fe,getErrors:X,values:f,meta:d,errors:u}),function(){const E=e.as==="form"?e.as:e.as?zn(e.as):null,ve=at(E,n,J);return E?xn(E,Object.assign(Object.assign(Object.assign({},E==="form"?{novalidate:!0}:{}),n.attrs),{onSubmit:Ve,onReset:ue}),ve):ve}}}),Bt=Tt;export{Bt as F,kt as u};
