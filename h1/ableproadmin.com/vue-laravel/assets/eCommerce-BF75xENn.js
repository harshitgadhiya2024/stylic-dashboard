import{bb as u,be as n}from"./index-DMeDtYdZ.js";import{l as r}from"./lodash-xecWrIep.js";const l=u({id:"eCommerce",state:()=>({products:[],cart:[],gender:"",category:[],price:"",subTotal:0,discount:5,total:0,addresses:[]}),getters:{},actions:{async fetchProducts(){try{const t=await n.get("/api/products/list");this.products=t.data}catch(t){alert(t)}},async fetchAddress(){try{const t=await n.get("/api/address/list");this.addresses=t.data}catch(t){alert(t)}},SelectGender(t){this.gender=t},SelectCategory(t){this.category=t},AddToCart(t){const a=t;this.cart=[...this.cart,a]},incrementQty(t,a){const i=t.id,s=a.map(e=>{if(e.id===i){const o=(e.qty||0)+1;return{...e,qty:o}}return e});this.cart=s,this.subTotal=r.sum(this.cart.map(e=>(e.salePrice??0)*(e.qty||0))),typeof this.subTotal=="number"?(this.discount=Math.round(this.subTotal*(5/100)),this.total=this.subTotal-this.discount):(this.discount=0,this.total=0)},decrementQty(t){if(typeof t!="number"&&typeof t!="string")return;const a=t,i=this.cart.map(s=>{if(s.id===a){const e=typeof s.qty=="number"&&s.qty-1>=0?s.qty-1:0;return{...s,qty:e}}return s});this.cart=i,this.subTotal=r.sum(this.cart.map(s=>typeof s.qty=="number"&&typeof s.salePrice=="number"?s.salePrice*s.qty:0))??0,this.discount=typeof this.subTotal=="number"?Math.round(this.subTotal*(5/100)):0,this.total=typeof this.subTotal=="number"&&typeof this.discount=="number"?this.subTotal-this.discount:0},deleteCart(t){const a=r.filter(this.cart,i=>i.id!==t);this.cart=a},getsubTotal(){this.subTotal=r.sum(this.cart.map(t=>typeof t.salePrice=="number"&&typeof t.qty=="number"?t.salePrice*t.qty:0))},getTotal(){typeof this.subTotal=="number"&&typeof this.discount=="number"?this.total=this.subTotal-this.discount:this.total=0},getDiscount(){typeof this.subTotal=="number"?this.discount=Math.round(this.subTotal*(5/100)):this.discount=0}}});export{l as u};
