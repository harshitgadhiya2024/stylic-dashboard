import{bb as Q,be as B,x as U,r as V,c,o as i,w as t,a as e,a9 as ee,b as l,e as h,_ as d,E,Y as A,f as P,k as M,V as F,R as L,q as x,A as R,d as b,X as j,h as O,K as z,B as H,D as W,F as I,s as N,t as f,g as te,i as le,j as q,l as K,Z as D,n as Y,b6 as ae,G as X,z as se,ai as ie,am as oe,$ as ne,p as re,C as de}from"./index-DMeDtYdZ.js";import{_ as ue}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-DcdKpoPB.js";import{u as ce,_ as me,E as pe,S as he,T as fe,a as ge,H as xe}from"./EditorMenubar-D9vTFPA7.js";import{f as Z}from"./format-DhyhRIV4.js";const J=Q({id:"mail",state:()=>({mails:[],activeFilter:"all",unreadCount:void 0}),getters:{},actions:{async fetchMails(){try{const n=await B.get("/api/mails/list");this.mails=n.data.mails,this.unreadCount=n.data.unreadCount}catch(n){alert(n)}},async filterMails(n){try{const s=await B.post("/api/mails/filter",{filter:n});this.mails=s.data}catch(s){alert(s)}},async setRead(n){try{await B.post("/api/mails/setRead",{id:n})}catch(s){alert(s)}},async setStarred(n){try{await B.post("/api/mails/setStarred",{id:n})}catch(s){alert(s)}},async setImportant(n){try{await B.post("/api/mails/setImportant",{id:n})}catch(s){alert(s)}},SelectFilter(n){this.activeFilter=n}}}),ve={class:"d-flex align-center"},ye={key:0},_e={class:"d-flex"},be=U({__name:"MailCompose",setup(n){const s=V(!1),g=ce({extensions:[he,fe,ge,xe],content:""});return(w,a)=>(i(),c(j,{elevation:"0"},{default:t(()=>[e(ee,{class:"pb-2"},{default:t(()=>[l("div",ve,[a[2]||(a[2]=l("h4",{class:"mb-0"},"New Message",-1)),e(h,{icon:"",size:"small",color:"primary","aria-label":"close",rounded:"md",variant:"text",class:"ms-auto",elevation:"0",onClick:a[0]||(a[0]=_=>w.$emit("closeDialog"))},{default:t(()=>[e(d,{name:"custom-close",style:{width:"16px",height:"16px",transform:"rotate(45deg)"}})]),_:1})])]),_:1}),e(E),e(A,{class:"pb-4"},{default:t(()=>[e(P,null,{default:t(()=>[e(F,{sm:"12",cols:"12"},{default:t(()=>[l("p",{class:"text-secondary text-end cursor-pointer",onClick:a[1]||(a[1]=_=>s.value=!s.value)},"CC & BCC")]),_:1}),e(F,{sm:"12",cols:"12"},{default:t(()=>[e(L,{"single-line":"",density:"comfortable",required:"",variant:"outlined",color:"primary","hide-details":""},{"prepend-inner":t(()=>a[3]||(a[3]=[l("span",{class:"text-secondary"},"To",-1)])),_:1})]),_:1}),e(F,{sm:"12",cols:"12"},{default:t(()=>[e(L,{"single-line":"",density:"comfortable",required:"",variant:"outlined",color:"primary","hide-details":""},{"prepend-inner":t(()=>a[4]||(a[4]=[l("span",{class:"text-secondary"},"Subject",-1)])),_:1})]),_:1}),s.value?(i(),c(F,{key:0,sm:"12",cols:"12"},{default:t(()=>[l("div",null,[e(L,{label:"CC",density:"comfortable",required:"",variant:"outlined",color:"primary","hide-details":"",class:"mb-5"}),e(L,{label:"BCC",density:"comfortable",required:"",variant:"outlined",color:"primary","hide-details":""})])]),_:1})):M("",!0),e(F,{sm:"12",cols:"12"},{default:t(()=>[R(g)?(i(),x("div",ye,[e(me,{editor:R(g)},null,8,["editor"])])):M("",!0),e(R(pe),{editor:R(g),class:"height-set"},null,8,["editor"])]),_:1}),e(F,{sm:"12",cols:"12"},{default:t(()=>[l("div",_e,[e(h,{icon:"",elevation:"0","aria-label":"upload",rounded:"md"},{default:t(()=>[e(d,{name:"custom-upload-outline",style:{width:"16px",height:"16px"}})]),_:1}),e(h,{icon:"",elevation:"0","aria-label":"attach",rounded:"md"},{default:t(()=>[e(d,{name:"custom-paper-clip-2",style:{width:"16px",height:"16px"}})]),_:1}),e(h,{elevation:"0",rounded:"md",color:"primary",class:"ms-auto"},{default:t(()=>a[5]||(a[5]=[b("Reply")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})]),_:1}))}}),G=U({__name:"MailSidebar",setup(n){const s=J();O(()=>{s.fetchMails(),s.filterMails(s.activeFilter)});const g=z(()=>s.mails),w=z(()=>s.activeFilter),a=async p=>{s.SelectFilter(p),await s.filterMails(p)},_=z(()=>g.value.filter(p=>!p.isRead).length),k=z(()=>g.value.filter(p=>!p.spam&&!p.isRead).length),v=z(()=>g.value.filter(p=>p.sent&&!p.isRead).length),C=z(()=>g.value.filter(p=>p.trash&&!p.isRead).length),$=H([{text:"All Mail",slug:"all",icon:"custom-mail-outline",label:_,iconColor:"text-lightText"},{text:"Inbox",slug:"inbox",icon:"custom-inbox-outline",label:k,iconColor:"text-lightText"},{text:"Sent",slug:"sent",icon:"custom-send-outline",label:v,iconColor:"text-lightText"},{text:"Draft",slug:"draft",icon:"custom-folder-minus-outline",iconColor:"text-lightText"},{text:"Spam",slug:"spam",icon:"custom-danger-outline",iconColor:"text-lightText"},{text:"Trash",slug:"trash",icon:"custom-trash",label:C,iconColor:"text-lightText"},{divider:!0},{header:"Filters"},{text:"Starred",slug:"starred",icon:"custom-star-outline",iconColor:"text-lightText"},{text:"Important",slug:"important",icon:"custom-bookmark-outline",iconColor:"text-lightText"},{divider:!0},{header:"Label"},{text:"Promotions",slug:"promotions",icon:"custom-tag-outline",iconColor:"text-primary"},{text:"Forums",slug:"forums",icon:"custom-tag-outline",iconColor:"text-warning"}]),S=V(!1);return(p,y)=>(i(),x("div",null,[e(h,{color:"primary",rounded:"md",block:"",size:"large",onClick:y[0]||(y[0]=m=>S.value=!0)},{default:t(()=>[e(d,{name:"custom-plus",style:{width:"24px",height:"24px"}}),y[3]||(y[3]=b("Â  Compose"))]),_:1,__:[3]}),e(W,{"aria-label":"chat sidebar","aria-busy":"true"},{default:t(()=>[(i(!0),x(I,null,N($.value,(m,u)=>(i(),x(I,{key:u},[m.divider?(i(),c(E,{key:0,class:"my-6"})):m.header?(i(),c(te,{key:1},{default:t(()=>[b(f(m.header),1)]),_:2},1024)):(i(),c(Y,{key:2,value:m,active:w.value===m.slug,onClick:r=>a(`${m.slug}`),color:"secondary",rounded:"md",class:"rounded-sm no-spacer"},le({prepend:t(()=>[e(d,{name:m.icon||"",class:D(`me-3 ${m.iconColor}`),style:{width:"18px",height:"18px"}},null,8,["name","class"])]),default:t(()=>[e(K,null,{default:t(()=>[b(f(m.text),1)]),_:2},1024)]),_:2},[m.label?{name:"append",fn:t(()=>[e(q,{class:"sidebarchip hide-menu",size:"small"},{default:t(()=>[b(f(m.label),1)]),_:2},1024)]),key:"0"}:void 0]),1032,["value","active","onClick"]))],64))),128))]),_:1}),e(ae,{modelValue:S.value,"onUpdate:modelValue":y[2]||(y[2]=m=>S.value=m),maxWidth:"600",height:"700"},{default:t(()=>[e(be,{onCloseDialog:y[1]||(y[1]=m=>S.value=!1)})]),_:1},8,["modelValue"])]))}}),we={class:"topbarMail d-flex ga-4 align-center w-100"},Ce={class:"d-flex align-center ga-4 w-100"},ke=["src","alt"],$e={class:"text-md-h4 text-h5 mb-n1"},Me={class:"ms-auto text-subtitle-2 text-medium-emphasis"},Ve={class:"d-flex align-center ga-2 mt-3"},Se={class:"text-lg-h3 text-h5 py-4 me-auto"},Te={class:"py-4 text-subtitle-1 font-weight-light"},De={class:"py-3"},Fe={class:"text-h5"},ze={class:"pa-3"},Re={class:"d-flex align-center"},Ie={class:"me-auto text-truncate"},Be={class:"py-3 d-flex ga-4"},Le=U({__name:"MailDetail",props:{selectedMail:Object||Array},emits:["toggleDetail"],setup(n){const s=n,g=H([{title:"Name"},{title:"Date"},{title:"Rating"},{title:"Unread"}]);return(w,a)=>{var _,k,v,C,$,S,p,y,m,u;return i(),x(I,null,[l("div",we,[e(h,{icon:"",rounded:"md",flat:"",onClick:a[0]||(a[0]=r=>w.$emit("toggleDetail")),size:"small"},{default:t(()=>[e(d,{name:"custom-chevron-outline",style:{width:"16px",height:"16px",transform:"rotate(180deg)"}})]),_:1}),l("div",Ce,[l("img",{src:(_=s.selectedMail)==null?void 0:_.profile.avatar,class:"rounded-md",alt:(k=s.selectedMail)==null?void 0:k.profile.avatar,width:"40"},null,8,ke),l("div",null,[l("h4",$e,f((v=s.selectedMail)==null?void 0:v.profile.name),1),l("small",null,"From: "+f((C=s.selectedMail)==null?void 0:C.profile.email),1)]),l("div",Me,f(R(Z)(new Date(($=n.selectedMail)==null?void 0:$.time),"d MMM")),1)])]),l("div",Ve,[l("h3",Se,f((S=n.selectedMail)==null?void 0:S.subject),1),e(h,{icon:"",size:"small",flat:"",rounded:"md"},{default:t(()=>{var r;return[(r=n.selectedMail)!=null&&r.starred?(i(),c(d,{key:0,name:"custom-star-outline",class:"text-warning",style:{width:"16px",height:"16px"}})):(i(),c(d,{key:1,name:"custom-star-outline",style:{width:"16px",height:"16px"}}))]}),_:1}),e(h,{icon:"",size:"small",flat:"",rounded:"md"},{default:t(()=>{var r;return[(r=n.selectedMail)!=null&&r.important?(i(),c(d,{key:0,name:"custom-tag-fill",class:"text-secondary",style:{width:"16px",height:"16px"}})):(i(),c(d,{key:1,name:"custom-tag-outline",style:{width:"16px",height:"16px"}}))]}),_:1}),e(h,{icon:"",size:"small","aria-label":"menu",flat:"",id:"menu-activator",rounded:"md"},{default:t(()=>[e(d,{name:"custom-more-outline",style:{width:"16px",height:"16px"}})]),_:1}),e(X,{activator:"#menu-activator",width:"100",rounded:"md"},{default:t(()=>[e(W,{elevation:"24",density:"compact","aria-label":"list","aria-busy":"true",class:"py-0",rounded:"md"},{default:t(()=>[(i(!0),x(I,null,N(g.value,(r,o)=>(i(),c(Y,{key:o,value:o},{default:t(()=>[e(K,{class:"text-h6"},{default:t(()=>[b(f(r.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),l("div",Te,[b(" Dear "+f((p=n.selectedMail)==null?void 0:p.profile.name)+",",1),a[1]||(a[1]=l("br",null,null,-1)),a[2]||(a[2]=l("br",null,null,-1)),l("p",null,f((y=n.selectedMail)==null?void 0:y.message),1),a[3]||(a[3]=l("br",null,null,-1)),a[4]||(a[4]=l("p",null,"Kindly Regards,",-1)),l("p",null,f((m=n.selectedMail)==null?void 0:m.sender.name),1)]),l("div",De,[l("h5",Fe,[e(d,{name:"custom-paper-clip-2",style:{width:"16px",height:"16px","vertical-align":"-3px"}}),b(" "+f((u=n.selectedMail)==null?void 0:u.attachments.length)+" Attachement ",1)]),e(P,{class:"mt-4"},{default:t(()=>{var r;return[(i(!0),x(I,null,N((r=n.selectedMail)==null?void 0:r.attachments,o=>(i(),c(F,{cols:"6",sm:"3",key:o.title},{default:t(()=>[e(j,{class:"overflow-hidden",variant:"outlined"},{default:t(()=>[e(se,{src:o.image,height:"100px",cover:""},null,8,["src"]),l("div",ze,[l("div",Re,[l("h5",Ie,f(o.title),1),e(h,{icon:"",size:"small",flat:"",rounded:"md"},{default:t(()=>[e(d,{name:"custom-download-outline",style:{width:"16px",height:"16px"}})]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),l("div",Be,[e(h,{color:"primary",variant:"outlined",rounded:"md"},{default:t(()=>[e(d,{name:"custom-edit-outline",class:"me-1",style:{width:"16px",height:"16px"}}),a[5]||(a[5]=b(" Reply"))]),_:1,__:[5]}),e(h,{color:"primary",variant:"outlined",rounded:"md"},{default:t(()=>[e(d,{name:"custom-forward-outline",class:"me-1",style:{width:"16px",height:"16px"}}),a[6]||(a[6]=b(" Forward"))]),_:1,__:[6]})])],64)}}}),Ne="img-empty-mail-B08y9Pgn.png",Ue={key:0},je={class:"pa-3 d-flex align-center"},Ae={class:"ms-auto"},qe={key:0,class:"px-4 pt-3"},Ee={class:"text-h4 text-secondary"},Pe=["onClick"],He=["src","alt"],We=["onClick"],Ke=["onClick"],Ye={class:"d-flex align-center ga-2"},Ge={class:"text-no-wrap text-truncate text-h6"},Oe={key:2,class:"text-center pa-3 d-flex justify-center align-center",style:{"min-height":"580px"}},Xe=["src"],Ze={key:1,class:"pa-5"},Je=U({__name:"MailListing",emits:["sToggle"],setup(n){const s=J();O(()=>{s.fetchMails(),s.filterMails(s.activeFilter)});const g=z(()=>s.mails),w=V(""),a=V(!1),_=H([{title:"Name"},{title:"Date"},{title:"Rating"},{title:"Unread"}]),k=V(!1),v=V(null),C=async u=>{s.SelectFilter(u),await s.filterMails(u)},$=async u=>{await s.setImportant(u),C(s.activeFilter)},S=async u=>{u&&(await s.setStarred(u),C(s.activeFilter))},p=z(()=>g.value.filter(u=>u.isChecked).length),y=async u=>{u&&(await s.setRead(u.id.toString()),C(s.activeFilter),k.value=!0,v.value=u)},m=z(()=>g.value.filter(u=>u.profile.name.toLowerCase().includes(w.value.toLowerCase())));return(u,r)=>(i(),x(I,null,[k.value?M("",!0):(i(),x("div",Ue,[l("div",je,[e(h,{icon:"",size:"small","aria-label":"menu",class:"d-lg-block d-none",rounded:"md",variant:"text",onClick:r[0]||(r[0]=o=>u.$emit("sToggle"))},{default:t(()=>[e(d,{name:"custom-menu-outline",style:{width:"18px",height:"18px"}})]),_:1}),e(h,{icon:"",size:"small","aria-label":"fullscreen",rounded:"md",flat:"",onClick:r[1]||(r[1]=o=>a.value=!a.value)},{default:t(()=>[e(d,{name:"custom-full-screen-outline",style:{width:"16px",height:"16px"}})]),_:1}),e(h,{icon:"",size:"small","aria-label":"menu",rounded:"md",flat:"",id:"menu-activator"},{default:t(()=>[e(d,{name:"custom-more-outline",style:{width:"16px",height:"16px"}})]),_:1}),e(X,{activator:"#menu-activator",width:"100",rounded:"md"},{default:t(()=>[e(W,{density:"compact",elevation:"24","aria-label":"list","aria-busy":"true",rounded:"md"},{default:t(()=>[(i(!0),x(I,null,N(_.value,(o,T)=>(i(),c(Y,{key:T,value:T},{default:t(()=>[e(K,{class:"text-body-1"},{default:t(()=>[b(f(o.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),l("div",Ae,[e(L,{variant:"outlined",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=o=>w.value=o),"persistent-placeholder":"",placeholder:"Search Mail","hide-details":"",density:"comfortable",class:"max-width-230"},{"prepend-inner":t(()=>[e(d,{name:"custom-search",class:"text-lightText",style:{width:"16px",height:"16px"}})]),_:1},8,["modelValue"])])]),e(E),p.value>0?(i(),x("div",qe,[l("h3",Ee,f(p.value)+" Mail Selected",1)])):M("",!0),m.value.length>0?(i(),c(oe,{key:1,class:"mt-3 mailTable bordered-table"},{default:t(()=>[l("tbody",null,[(i(!0),x(I,null,N(m.value,o=>(i(),x("tr",{key:o.id,class:D(`cursor-pointer ${o.isChecked?"bg-lightprimary":""} ${o.isRead?"text-medium-emphasis":"font-weight-medium"}`)},[l("td",{class:D(`checkboxWidth d-table ${a.value?"py-1":"py-2"}`)},[e(ie,{modelValue:o.isChecked,"onUpdate:modelValue":T=>o.isChecked=T,"aria-label":"checkbox","hide-details":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])],2),l("td",{class:D(`checkboxWidth ${a.value?"py-1":"py-2"}`)},[e(h,{icon:"",size:"small","aria-label":"starred",rounded:"md",flat:"",onClick:T=>S(`${o.id}`)},{default:t(()=>[o.starred?(i(),c(d,{key:0,name:"custom-star-outline",class:"text-warning",style:{width:"16px",height:"16px"}})):(i(),c(d,{key:1,name:"custom-star-outline",style:{width:"16px",height:"16px"}}))]),_:2},1032,["onClick"])],2),l("td",{width:"30",class:D(`${a.value?"py-1":"py-2"}`)},[e(h,{icon:"",size:"small","aria-label":"tag",rounded:"md",flat:"",onClick:T=>$(`${o.id}`)},{default:t(()=>[o.important?(i(),c(d,{key:0,name:"custom-tag-fill",class:"text-primary",style:{width:"16px",height:"16px"}})):(i(),c(d,{key:1,name:"custom-tag-outline",class:"text-lightText",style:{width:"16px",height:"16px"}}))]),_:2},1032,["onClick"])],2),l("td",{onClick:T=>y(o),class:D(`${a.value?"py-1":"py-2"}`)},[l("img",{src:o.profile.avatar,class:"rounded-md",alt:o.profile.avatar,width:"36"},null,8,He)],10,Pe),l("td",{class:D(`text-no-wrap text-subtitle-1 ${a.value?"py-1":"py-2"}`),onClick:T=>y(o)},f(o.profile.name),11,We),l("td",{onClick:T=>y(o),class:D(`${a.value?"py-1":"py-2"}`)},[l("div",Ye,[l("div",Ge,f(o.subject),1),o.promotions?(i(),c(q,{key:0,size:"small",color:"primary"},{default:t(()=>r[4]||(r[4]=[b("Promotions")])),_:1,__:[4]})):M("",!0),o.forums?(i(),c(q,{key:1,size:"small",color:"warning"},{default:t(()=>r[5]||(r[5]=[b("Forums")])),_:1,__:[5]})):M("",!0),o.attachments.length>0?(i(),c(h,{key:2,icon:"","aria-label":"attach",size:"small",rounded:"md",flat:""},{default:t(()=>[e(d,{name:"custom-paper-clip-2",style:{width:"16px",height:"16px"}})]),_:1})):M("",!0)])],10,Ke),l("td",{class:D(`text-no-wrap text-caption text-end ${a.value?"py-1":"py-2"}`)},f(R(Z)(new Date(o.time),"d MMM yy HH:mm a")),3)],2))),128))])]),_:1})):(i(),x("div",Oe,[l("div",null,[l("img",{src:R(Ne),alt:"empty mail"},null,8,Xe),r[6]||(r[6]=l("h2",null,"There is No Mail",-1)),r[7]||(r[7]=l("p",{class:"text-lightText"},"When You have message that will Display here",-1))])]))])),k.value&&v.value?(i(),x("div",Ze,[e(Le,{onToggleDetail:r[3]||(r[3]=o=>k.value=!1),selectedMail:v.value},null,8,["selectedMail"])])):M("",!0)],64))}}),at=U({__name:"MailPage",setup(n){const s=V({title:"Mail Page"}),{lgAndUp:g}=ne(),w=V([{title:"Applications",disabled:!1,href:"#"},{title:"Mail",disabled:!0,href:"#"}]),a=V(!1),_=V(!1);return(k,v)=>{const C=re("perfect-scrollbar");return i(),x(I,null,[e(ue,{title:s.value.title,breadcrumbs:w.value},null,8,["title","breadcrumbs"]),e(P,null,{default:t(()=>[!a.value&&R(g)?(i(),c(F,{key:0,class:"d-flex align-stretch mailSidebar pe-md-0"},{default:t(()=>[e(j,{variant:"outlined",class:"bg-surface br-0",rounded:"lg"},{default:t(()=>[e(C,{style:{height:"calc(100vh - 60px)"}},{default:t(()=>[e(A,{class:"pa-5"},{default:t(()=>[e(G)]),_:1})]),_:1})]),_:1})]),_:1})):M("",!0),e(F,{class:"d-flex align-stretch overflow-auto ps-md-0"},{default:t(()=>[e(j,{variant:"outlined",class:"bg-surface overflow-hidden bl-0",rounded:"lg"},{default:t(()=>[e(h,{icon:"",onClick:v[0]||(v[0]=$=>_.value=!_.value),"aria-label":"menu",variant:"text",rounded:"md",class:"d-lg-none d-md-flex d-sm-flex"},{default:t(()=>[e(d,{name:"custom-menu-outline",style:{width:"18px",height:"18px"}})]),_:1}),l("div",null,[e(Je,{onSToggle:v[1]||(v[1]=$=>a.value=!a.value)})])]),_:1})]),_:1})]),_:1}),R(g)?M("",!0):(i(),c(de,{key:0,temporary:"",modelValue:_.value,"onUpdate:modelValue":v[2]||(v[2]=$=>_.value=$),width:"300",top:""},{default:t(()=>[e(C,{style:{height:"calc(100vh - 100px)"}},{default:t(()=>[e(A,{class:"pa-5"},{default:t(()=>[e(G)]),_:1})]),_:1})]),_:1},8,["modelValue"]))],64)}}});export{at as default};
